
# Underscore Template Colorizer README

This is a simple extension of a stripped down version of sublime's html colorizer to provide some basic colorization to embedded js tags.  Currently this extension targets `<?js ... ?>` format tags, following the pattern used in `jsDoc` templates.  Left unchanged are the original sublime template's rules which will recognize default `underscore` templates as "ruby" code.  This colorizer also includes patterns to "ignore" script tags with `type=text/template` (see [this discussion](https://stackoverflow.com/questions/9655039/sublime-text-2-recognize-underscore-templates-as-html/11886848#11886848)).

## Features

In addition to the "usual" scope names, this grammar generates the following additional names for `.tmpl` files (again matching `<?js...?>` tag patterns):

- `punctuation.definition.tag.html.embed.js` :  For the embedding js tags themselves.
- `punctuation.definition.string.begin.embedded`, `string.quoted.single.html.embedded`, `punctuation.definition.string.end.html.embedded` : For strings in an embedded js chunk.
- `punctuation.definition.tag.html.embedded.scope` : To colorize scope/control punctuation in an embedded js chunk.
- `punctuation.definition.tag.html.embedded` : All other embedded "punctuation" (e.g. operators, parens, etc.)
- `comment.line.double-slash.embedded.js`, `comment.block.embedded.js`, `comment.block.documentation.embedded.js` : Embedded comment body
    - `punctuation.whitespace.comment.leading.embedded.js` : leading white space for a comment
    - `punctuation.definition.comment.embedded.js` : The leading `//` for a comment
    - `storage.type.internaldeclaration.embedded.js` : @internal decl (honestly not familiar with this comment pattern)
    - `punctuation.decorator.internaldeclaration.embedded.js` : The `@internal` itself.
- `meta.embedded.js` : The entire body of embedded js chunks are tagged with this scope name.

## Usage

You can assign custom colors to the scope names generated by the grammar above by modifying your `Settings.json`.

    "editor.tokenColorCustomizations": {
      "textMateRules": [
        {
          "name": "Tags",
          "scope": [
              "punctuation.definition.tag.html.embed.js"
          ],
          "settings": {
              "foreground": "#666"
          }
        },

## Hackory

If you want to change the template characters (at least until vscode team implements some variant of my suggestion), you can go to ~line 523 in the `Underscore.tmLanguage` file and change the `<begin>` and `<end>` string patterns--`#embedded-js` is defined in the respository dictionary.

## Known Issues

- This grammar provides only limited coloring for embedded js.
- The scope names employed may be inappropriate.
- This grammar currently identifies `<?js>` as the embedded js tag.

## Release Notes

### 0.0.6

- Added support to recognize HTML-escaped values (oversight)

### 0.0.5

- Initial release

## License
[MIT](LICENSE.txt)